{
  "suite": "core_list",
  "cases": [
    {
      "name": "lpush_single",
      "now_ms": 0,
      "argv": ["LPUSH", "l1", "a"],
      "expect": { "kind": "integer", "value": 1 }
    },
    {
      "name": "lpush_multiple",
      "now_ms": 0,
      "argv": ["LPUSH", "l1", "b", "c"],
      "expect": { "kind": "integer", "value": 3 }
    },
    {
      "name": "lrange_all",
      "now_ms": 0,
      "argv": ["LRANGE", "l1", "0", "-1"],
      "expect": {
        "kind": "array",
        "value": [
          { "kind": "bulk", "value": "c" },
          { "kind": "bulk", "value": "b" },
          { "kind": "bulk", "value": "a" }
        ]
      }
    },
    {
      "name": "rpush_single",
      "now_ms": 0,
      "argv": ["RPUSH", "l1", "d"],
      "expect": { "kind": "integer", "value": 4 }
    },
    {
      "name": "llen",
      "now_ms": 0,
      "argv": ["LLEN", "l1"],
      "expect": { "kind": "integer", "value": 4 }
    },
    {
      "name": "llen_missing_key",
      "now_ms": 0,
      "argv": ["LLEN", "nokey"],
      "expect": { "kind": "integer", "value": 0 }
    },
    {
      "name": "lindex_zero",
      "now_ms": 0,
      "argv": ["LINDEX", "l1", "0"],
      "expect": { "kind": "bulk", "value": "c" }
    },
    {
      "name": "lindex_negative",
      "now_ms": 0,
      "argv": ["LINDEX", "l1", "-1"],
      "expect": { "kind": "bulk", "value": "d" }
    },
    {
      "name": "lindex_out_of_range",
      "now_ms": 0,
      "argv": ["LINDEX", "l1", "100"],
      "expect": { "kind": "bulk", "value": null }
    },
    {
      "name": "lpop_head",
      "now_ms": 0,
      "argv": ["LPOP", "l1"],
      "expect": { "kind": "bulk", "value": "c" }
    },
    {
      "name": "rpop_tail",
      "now_ms": 0,
      "argv": ["RPOP", "l1"],
      "expect": { "kind": "bulk", "value": "d" }
    },
    {
      "name": "lrange_after_pops",
      "now_ms": 0,
      "argv": ["LRANGE", "l1", "0", "-1"],
      "expect": {
        "kind": "array",
        "value": [
          { "kind": "bulk", "value": "b" },
          { "kind": "bulk", "value": "a" }
        ]
      }
    },
    {
      "name": "lset_element",
      "now_ms": 0,
      "argv": ["LSET", "l1", "0", "B"],
      "expect": { "kind": "simple", "value": "OK" }
    },
    {
      "name": "lindex_after_set",
      "now_ms": 0,
      "argv": ["LINDEX", "l1", "0"],
      "expect": { "kind": "bulk", "value": "B" }
    },
    {
      "name": "lpop_empty_key",
      "now_ms": 0,
      "argv": ["LPOP", "nokey"],
      "expect": { "kind": "bulk", "value": null }
    },
    {
      "name": "rpop_empty_key",
      "now_ms": 0,
      "argv": ["RPOP", "nokey"],
      "expect": { "kind": "bulk", "value": null }
    },
    {
      "name": "linsert_setup",
      "now_ms": 0,
      "argv": ["RPUSH", "li", "a", "b", "d"],
      "expect": { "kind": "integer", "value": 3 }
    },
    {
      "name": "linsert_before",
      "now_ms": 0,
      "argv": ["LINSERT", "li", "BEFORE", "d", "c"],
      "expect": { "kind": "integer", "value": 4 }
    },
    {
      "name": "linsert_after",
      "now_ms": 0,
      "argv": ["LINSERT", "li", "AFTER", "a", "a2"],
      "expect": { "kind": "integer", "value": 5 }
    },
    {
      "name": "linsert_missing_pivot",
      "now_ms": 0,
      "argv": ["LINSERT", "li", "BEFORE", "z", "x"],
      "expect": { "kind": "integer", "value": -1 }
    },
    {
      "name": "linsert_missing_key",
      "now_ms": 0,
      "argv": ["LINSERT", "nokey", "BEFORE", "a", "b"],
      "expect": { "kind": "integer", "value": 0 }
    },
    {
      "name": "lrem_setup",
      "now_ms": 0,
      "argv": ["RPUSH", "lr", "a", "b", "a", "c", "a"],
      "expect": { "kind": "integer", "value": 5 }
    },
    {
      "name": "lrem_positive_count",
      "now_ms": 0,
      "argv": ["LREM", "lr", "2", "a"],
      "expect": { "kind": "integer", "value": 2 }
    },
    {
      "name": "lrange_after_lrem",
      "now_ms": 0,
      "argv": ["LRANGE", "lr", "0", "-1"],
      "expect": {
        "kind": "array",
        "value": [
          { "kind": "bulk", "value": "b" },
          { "kind": "bulk", "value": "c" },
          { "kind": "bulk", "value": "a" }
        ]
      }
    },
    {
      "name": "ltrim_setup",
      "now_ms": 0,
      "argv": ["RPUSH", "lt", "a", "b", "c", "d", "e"],
      "expect": { "kind": "integer", "value": 5 }
    },
    {
      "name": "ltrim_middle",
      "now_ms": 0,
      "argv": ["LTRIM", "lt", "1", "3"],
      "expect": { "kind": "simple", "value": "OK" }
    },
    {
      "name": "lrange_after_ltrim",
      "now_ms": 0,
      "argv": ["LRANGE", "lt", "0", "-1"],
      "expect": {
        "kind": "array",
        "value": [
          { "kind": "bulk", "value": "b" },
          { "kind": "bulk", "value": "c" },
          { "kind": "bulk", "value": "d" }
        ]
      }
    },
    {
      "name": "lpushx_existing",
      "now_ms": 0,
      "argv": ["LPUSHX", "lt", "x"],
      "expect": { "kind": "integer", "value": 4 }
    },
    {
      "name": "lpushx_missing",
      "now_ms": 0,
      "argv": ["LPUSHX", "nokey", "x"],
      "expect": { "kind": "integer", "value": 0 }
    },
    {
      "name": "rpushx_existing",
      "now_ms": 0,
      "argv": ["RPUSHX", "lt", "z"],
      "expect": { "kind": "integer", "value": 5 }
    },
    {
      "name": "rpushx_missing",
      "now_ms": 0,
      "argv": ["RPUSHX", "nokey", "z"],
      "expect": { "kind": "integer", "value": 0 }
    },
    {
      "name": "lmove_setup",
      "now_ms": 0,
      "argv": ["RPUSH", "lmsrc", "a", "b", "c"],
      "expect": { "kind": "integer", "value": 3 }
    },
    {
      "name": "lmove_left_right",
      "now_ms": 0,
      "argv": ["LMOVE", "lmsrc", "lmdst", "LEFT", "RIGHT"],
      "expect": { "kind": "bulk", "value": "a" }
    },
    {
      "name": "lmove_verify_src",
      "now_ms": 0,
      "argv": ["LRANGE", "lmsrc", "0", "-1"],
      "expect": {
        "kind": "array",
        "value": [
          { "kind": "bulk", "value": "b" },
          { "kind": "bulk", "value": "c" }
        ]
      }
    },
    {
      "name": "lmove_verify_dst",
      "now_ms": 0,
      "argv": ["LRANGE", "lmdst", "0", "-1"],
      "expect": {
        "kind": "array",
        "value": [
          { "kind": "bulk", "value": "a" }
        ]
      }
    },
    {
      "name": "lpop_with_count",
      "now_ms": 0,
      "argv": ["RPUSH", "lpc", "a", "b", "c", "d"],
      "expect": { "kind": "integer", "value": 4 }
    },
    {
      "name": "lpop_count_2",
      "now_ms": 0,
      "argv": ["LPOP", "lpc", "2"],
      "expect": {
        "kind": "array",
        "value": [
          { "kind": "bulk", "value": "a" },
          { "kind": "bulk", "value": "b" }
        ]
      }
    },
    {
      "name": "rpop_count_2",
      "now_ms": 0,
      "argv": ["RPOP", "lpc", "2"],
      "expect": {
        "kind": "array",
        "value": [
          { "kind": "bulk", "value": "d" },
          { "kind": "bulk", "value": "c" }
        ]
      }
    },
    {
      "name": "lpos_setup",
      "now_ms": 0,
      "argv": ["RPUSH", "lp", "a", "b", "a", "c", "a"],
      "expect": { "kind": "integer", "value": 5 }
    },
    {
      "name": "lpos_basic",
      "now_ms": 0,
      "argv": ["LPOS", "lp", "a"],
      "expect": { "kind": "integer", "value": 0 }
    },
    {
      "name": "lpos_missing_element",
      "now_ms": 0,
      "argv": ["LPOS", "lp", "z"],
      "expect": { "kind": "bulk", "value": null }
    },
    {
      "name": "lpos_rank_2",
      "now_ms": 0,
      "argv": ["LPOS", "lp", "a", "RANK", "2"],
      "expect": { "kind": "integer", "value": 2 }
    },
    {
      "name": "lpos_rank_3",
      "now_ms": 0,
      "argv": ["LPOS", "lp", "a", "RANK", "3"],
      "expect": { "kind": "integer", "value": 4 }
    },
    {
      "name": "lpos_rank_negative",
      "now_ms": 0,
      "argv": ["LPOS", "lp", "a", "RANK", "-1"],
      "expect": { "kind": "integer", "value": 4 }
    },
    {
      "name": "lpos_rank_negative_2",
      "now_ms": 0,
      "argv": ["LPOS", "lp", "a", "RANK", "-2"],
      "expect": { "kind": "integer", "value": 2 }
    },
    {
      "name": "lpos_count_0",
      "now_ms": 0,
      "argv": ["LPOS", "lp", "a", "COUNT", "0"],
      "expect": {
        "kind": "array",
        "value": [
          { "kind": "integer", "value": 0 },
          { "kind": "integer", "value": 2 },
          { "kind": "integer", "value": 4 }
        ]
      }
    },
    {
      "name": "lpos_count_2",
      "now_ms": 0,
      "argv": ["LPOS", "lp", "a", "COUNT", "2"],
      "expect": {
        "kind": "array",
        "value": [
          { "kind": "integer", "value": 0 },
          { "kind": "integer", "value": 2 }
        ]
      }
    },
    {
      "name": "lpos_count_with_rank",
      "now_ms": 0,
      "argv": ["LPOS", "lp", "a", "RANK", "2", "COUNT", "2"],
      "expect": {
        "kind": "array",
        "value": [
          { "kind": "integer", "value": 2 },
          { "kind": "integer", "value": 4 }
        ]
      }
    },
    {
      "name": "lpos_maxlen",
      "now_ms": 0,
      "argv": ["LPOS", "lp", "a", "MAXLEN", "3"],
      "expect": { "kind": "integer", "value": 0 }
    },
    {
      "name": "lpos_count_missing_element",
      "now_ms": 0,
      "argv": ["LPOS", "lp", "z", "COUNT", "0"],
      "expect": { "kind": "array", "value": [] }
    },
    {
      "name": "lpos_missing_key",
      "now_ms": 0,
      "argv": ["LPOS", "nokey", "a"],
      "expect": { "kind": "bulk", "value": null }
    },
    {
      "name": "lpush_wrongtype_on_string",
      "now_ms": 0,
      "argv": ["SET", "strkey2", "v"],
      "expect": { "kind": "simple", "value": "OK" }
    },
    {
      "name": "lpush_wrongtype_error",
      "now_ms": 0,
      "argv": ["LPUSH", "strkey2", "a"],
      "expect": { "kind": "error", "value": "WRONGTYPE Operation against a key holding the wrong kind of value" }
    }
  ]
}
